webpackJsonp([1],{"63ed":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),r=a("woOf"),i=a.n(r),s=a("Dd8w"),d=a.n(s),o=a("NYxO"),l={name:"eventCalendar",data:function(){return{dialogTitle:"",dateData:{year:1970,month:1,day:1,date:1,curyear:1970,curmonth:1,curday:1,curdate:1},dateTitle:["日","一","二","三","四","五","六"],dayArr:[],tempEvents:[],addForm:{title:"",desc:"",start:"",end:""},editForm:{},addRules:{title:[{required:!0,message:"请输入活动名称",trigger:"blur"}],desc:[{required:!0,message:"请输入事件详情",trigger:"blur"}]},addVisible:!1}},computed:d()({},Object(o.b)({eventList:function(t){return t.eventList}}),{dayStr:function(){return this.formatDate(this.dateData.year,this.dateData.month,this.dateData.date)},curDayStr:function(){return this.formatDate(this.dateData.curyear,this.dateData.curmonth,this.dateData.curdate)},filterEventList:function(){var t=this;return this.eventList.filter(function(e){var a=new Date(e.start),n=new Date(e.end),r=new Date(t.curDayStr);return r>=a&&r<=n})}}),methods:{initCalendar:function(t){for(var e,a=this,n=42-((e=t?new Date(t):new Date).getDay()+1),r=this.formatDate(e.getFullYear(),e.getMonth()+1,e.getDate()),i=[],s=function(t){var e=new Date(r);e.setDate(e.getDate()-t);var n=a.formatDate(e.getFullYear(),e.getMonth()+1,e.getDate()),s=a.eventList.some(function(t){var e=new Date(t.start),a=new Date(t.end),r=new Date(n);return r>=e&&r<=a});i.push({date:e.getDate(),month:e.getMonth()+1,year:e.getFullYear(),hasEvent:s})},d=e.getDay();d>0;d--)s(d);var o=function(t){var e=new Date(r);e.setDate(e.getDate()+t);var n=a.formatDate(e.getFullYear(),e.getMonth()+1,e.getDate()),s=a.eventList.some(function(t){var e=new Date(t.start),a=new Date(t.end),r=new Date(n);return r>=e&&r<=a});i.push({date:e.getDate(),month:e.getMonth()+1,year:e.getFullYear(),hasEvent:s})};for(d=0;d<=n;d++)o(d);this.dayArr=i.slice(0)},formatDate:function(t,e,a){var n=e;n<10&&(n="0"+n);var r=a;return r<10&&(r="0"+r),t+"-"+n+"-"+r},formatDate1:function(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth()+1;n<10&&(n="0"+n);var r=e.getDate();return r<10&&(r="0"+r),a+"-"+n+"-"+r},changeTime:function(t){"add"===t?12===this.dateData.curmonth?(this.dateData.curmonth=1,this.dateData.curyear+=1):this.dateData.curmonth+=1:"reduce"===t&&(1===this.dateData.curmonth?(this.dateData.curmonth=12,this.dateData.curyear-=1):this.dateData.curmonth-=1),this.initCalendar(this.formatDate(this.dateData.curyear,this.dateData.curmonth,1))},selectDate:function(t){this.dateData.curmonth!==t.month&&this.initCalendar(this.formatDate(t.year,t.month,1)),this.dateData.curdate=t.date,this.dateData.curmonth=t.month,this.dateData.curyear=t.year,this.addForm.start=this.addForm.end=new Date(this.curDayStr)},submitEvent:function(){var t={start:this.formatDate1(this.addForm.start),end:this.formatDate1(this.addForm.end),title:this.addForm.title,desc:this.addForm.desc};if(this.editForm.title){var e=this.tempEvents.indexOf(this.editForm);this.tempEvents.splice(e,1),this.editForm={}}this.addForm.title&&this.addForm.title.length?(this.tempEvents.push(t),this.$store.commit("updateEvents",this.tempEvents),this.addVisible=!1):this.$message("请填写完整事项信息！")},cancelEvent:function(){this.editForm={},this.addVisible=!1},handleEvent:function(t){this.tempEvents=this.eventList,this.addVisible=!0,null!==t?(this.dialogTitle="编辑事项",this.editForm=t,this.addForm=i()({},t),this.addForm.start=new Date(this.addForm.start),this.addForm.end=new Date(this.addForm.end)):(this.dialogTitle="新增事项",this.addForm.title="",this.addForm.desc="",this.addForm.start=new Date(this.curDayStr),this.addForm.end=new Date(this.curDayStr))},delEvent:function(t){var e=this;this.tempEvents=this.eventList;var a=this.tempEvents.indexOf(t);console.log(a),this.$confirm("<p>您确认删除该事项吗？<p><p>起止时间："+t.start+" - "+t.end+"</p><p>事件："+t.title+"</p>","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){e.tempEvents.splice(a,1),e.$store.commit("updateEvents",e.tempEvents),e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}},mounted:function(){var t=new Date;this.dateData.curdate=this.dateData.date=t.getDate(),this.dateData.curyear=this.dateData.year=t.getFullYear(),this.dateData.curmonth=this.dateData.month=t.getMonth()+1,this.dateData.curday=this.dateData.day=t.getDay(),this.initCalendar(this.formatDate(this.dateData.year,this.dateData.month,1)),this.addForm.start=this.addForm.end=new Date(this.dayStr)},watch:{filterEventList:function(){this.initCalendar(this.formatDate(this.dateData.curyear,this.dateData.curmonth,1))}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("h2",{staticClass:"cal-title"},[t._v("日程活动")]),t._v(" "),a("div",{staticClass:"cal-head"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.changeTime("reduce")}}},[a("i",{staticClass:"arrow-icon el-icon-arrow-left"})]),t._v(" "),a("span",{staticClass:"cal-head-date"},[t._v(t._s(t.dateData.curyear+"年"+t.dateData.curmonth+"月"))]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.changeTime("add")}}},[a("i",{staticClass:"arrow-icon el-icon-arrow-right"})])],1),t._v(" "),a("div",{staticClass:"cal-body"},[a("div",{staticClass:"cal-date-title"},t._l(t.dateTitle,function(e,n){return a("span",{key:n},[t._v(t._s(e))])}),0),t._v(" "),a("div",{staticClass:"cal-day"},t._l(t.dayArr,function(e,n){return a("div",{key:n,staticClass:"day",on:{click:function(a){return t.selectDate(e)}}},[a("span",{class:{today:t.dateData.year===e.year&&t.dateData.month===e.month&&t.dateData.date===e.date,isCurMonth:t.dateData.curmonth===e.month}},[t._v(t._s(e.date))]),e.hasEvent?a("i",{staticClass:"hasEvent"}):t._e(),t.dateData.curyear===e.year&&t.dateData.curmonth===e.month&&t.dateData.curdate===e.date?a("i",{staticClass:"selectedday"}):t._e()])}),0)]),t._v(" "),a("div",{staticClass:"cal-event-container"},[a("div",[a("h3",[a("el-button",{staticClass:"add-event",attrs:{icon:"el-icon-plus",circle:"",size:"mini",type:"warning"},on:{click:function(e){return t.handleEvent(null)}}}),t._v("\n        "+t._s(t.dateData.curyear+" / "+t.dateData.curmonth+" / "+t.dateData.curdate)+"\n      ")],1)]),t._v(" "),a("ul",{staticClass:"cal-event"},[t._l(t.filterEventList,function(e,n){return a("li",{key:n,staticClass:"cal-event-item",class:{notlast:t.filterEventList.length!==n+1}},[a("el-popover",{attrs:{placement:"top",width:"400",trigger:"hover"}},[a("span",{attrs:{slot:"reference"},on:{click:function(a){return t.handleEvent(e)}},slot:"reference"},[t._v(t._s(++n+" "+e.title))]),t._v(" "),a("p",[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("起止时间：")]),t._v(t._s(e.start)+" 至 "+t._s(e.end))]),t._v(" "),a("p",[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("事件：")]),t._v(t._s(e.title))]),t._v(" "),a("p",[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("详情：")]),t._v(t._s(e.desc))])]),t._v(" "),a("span",{staticClass:"el-icon-error del-btn",on:{click:function(a){return t.delEvent(e)}}})],1)}),t._v(" "),t.filterEventList.length?t._e():a("li",{staticClass:"no-event"},[t._v("当日无待办事项")])],2)]),t._v(" "),t.addVisible?a("div",{staticClass:"add-dialog-wrap"},[a("div",{staticClass:"add-dialog-content"},[a("p",{staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v(t._s(t.dialogTitle))]),t._v(" "),a("el-form",{ref:"form",attrs:{"label-width":"80px",model:t.addForm,rules:t.addRules}},[a("el-form-item",{attrs:{label:"事项名称",required:"",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入事件标题"},model:{value:t.addForm.title,callback:function(e){t.$set(t.addForm,"title",e)},expression:"addForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"事件详情",required:"",prop:"desc"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入事件详情",maxlength:"50",rows:3},model:{value:t.addForm.desc,callback:function(e){t.$set(t.addForm,"desc",e)},expression:"addForm.desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间",required:""}},[a("el-col",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"开始日期"},model:{value:t.addForm.start,callback:function(e){t.$set(t.addForm,"start",e)},expression:"addForm.start"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间",required:""}},[a("el-col",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"结束日期"},model:{value:t.addForm.end,callback:function(e){t.$set(t.addForm,"end",e)},expression:"addForm.end"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitEvent(e)}}},[t._v("提交")]),t._v(" "),a("el-button",{nativeOn:{click:function(e){return t.cancelEvent(e)}}},[t._v("取消")])],1)],1)],1)]):t._e()])},staticRenderFns:[]};var u={name:"App",components:{eventCalendar:a("VU/8")(l,c,!1,function(t){a("63ed"),a("m7gL")},"data-v-aae92158",null).exports}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("event-calendar")],1)},staticRenderFns:[]};var m=a("VU/8")(u,h,!1,function(t){a("dT0X")},null,null).exports;n.default.use(o.a);var v=new o.a.Store({state:{eventList:[{start:"2019-04-11",end:"2019-04-19",title:"待办1",desc:""},{start:"2019-04-19",end:"2019-04-21",title:"待办2",desc:""}]},mutations:{updateEvents:function(t,e){t.eventList=e}}}),D=a("zL8q"),f=a.n(D);a("tvR6");n.default.config.productionTip=!1,n.default.use(f.a),new n.default({el:"#app",store:v,render:function(t){return t(m)}})},dT0X:function(t,e){},m7gL:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.48ca4b3c4ba51e8bcf30.js.map
